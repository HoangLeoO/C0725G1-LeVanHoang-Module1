<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    // ==========================
    // 1. Thêm / Xóa phần tử
    // ==========================

    let arr = [1, 2, 3];

    // push: thêm phần tử vào CUỐI mảng
    arr.push(4); // [1, 2, 3, 4]

    // pop: xóa phần tử CUỐI mảng
    arr.pop(); // [1, 2, 3]

    // unshift: thêm phần tử vào ĐẦU mảng
    arr.unshift(0); // [0, 1, 2, 3]

    // shift: xóa phần tử ĐẦU mảng
    arr.shift(); // [1, 2, 3]

    // splice(start, deleteCount, ...items): thêm / xóa phần tử
    arr.splice(1, 1, 9, 8); // [1, 9, 8, 3]

    // slice(start, end): cắt mảng con (không ảnh hưởng mảng gốc)
    let sub = arr.slice(1, 3); // sub = [9, 8], arr vẫn = [1, 9, 8, 3]


    // ==========================
    // 2. Duyệt mảng
    // ==========================

    let nums = [1, 2, 3, 4, 5];

    // forEach: duyệt từng phần tử, KHÔNG trả về mảng
    nums.forEach(n => console.log("forEach:", n));

    // map: tạo mảng mới từ kết quả
    let doubled = nums.map(n => n * 2); // [2, 4, 6, 8, 10]

    // filter: lọc theo điều kiện
    let even = nums.filter(n => n % 2 === 0); // [2, 4]

    // reduce: gộp mảng thành 1 giá trị
    let sum = nums.reduce((acc, cur) => acc + cur, 0); // 15

    // reduceRight: duyệt từ PHẢI sang TRÁI
    let concat = ["a", "b", "c"].reduceRight((acc, cur) => acc + cur, ""); // "cba"

    // some: ít nhất 1 phần tử thỏa điều kiện
    let hasEven = nums.some(n => n % 2 === 0); // true

    // every: tất cả phần tử thỏa điều kiện
    let allPositive = nums.every(n => n > 0); // true

    // find: trả về PHẦN TỬ đầu tiên thỏa điều kiện
    let firstEven = nums.find(n => n % 2 === 0); // 2

    // findLast: trả về PHẦN TỬ cuối cùng thỏa điều kiện
    let lastEven = nums.findLast(n => n % 2 === 0); // 4 (ES2023)

    // findIndex: index của phần tử đầu tiên
    let idx = nums.findIndex(n => n > 3); // 3

    // findLastIndex: index của phần tử cuối cùng
    let idx2 = nums.findLastIndex(n => n > 3); // 4 (ES2023)


    // ==========================
    // 3. Tìm kiếm / Kiểm tra
    // ==========================

    let letters = ["a", "b", "c", "b"];

    // indexOf: vị trí đầu tiên
    letters.indexOf("b"); // 1

    // lastIndexOf: vị trí cuối cùng
    letters.lastIndexOf("b"); // 3

    // includes: kiểm tra có tồn tại không
    letters.includes("c"); // true


    // ==========================
    // 4. Sắp xếp / Đảo ngược
    // ==========================

    let arr2 = [3, 1, 2];

    // sort: sắp xếp (theo Unicode nếu không có hàm so sánh)
    arr2.sort((a, b) => a - b); // [1, 2, 3]

    // reverse: đảo ngược mảng
    arr2.reverse(); // [3, 2, 1]

    // toSorted: trả về mảng mới đã sort (ES2023)
    let sortedNew = arr2.toSorted((a, b) => a - b); // [1,2,3], arr2 vẫn [3,2,1]

    // toReversed: trả về mảng mới đảo ngược (ES2023)
    let revNew = arr2.toReversed(); // [1,2,3], arr2 vẫn [3,2,1]


    // ==========================
    // 5. Nối / Tách
    // ==========================

    let a1 = [1, 2];
    let a2 = [3, 4];

    // concat: nối mảng
    let joined = a1.concat(a2); // [1,2,3,4]

    // join: nối phần tử thành chuỗi
    joined.join("-"); // "1-2-3-4"

    // flat: làm phẳng mảng
    [1, [2, [3]]].flat(2); // [1, 2, 3]

    // flatMap: map + flat(1)
    [1, 2, 3].flatMap(x => [x, x * 2]); // [1,2,2,4,3,6]


    // ==========================
    // 6. Sao chép / Cắt
    // ==========================

    let arr3 = [1, 2, 3, 4];

    // copyWithin(target, start, end): sao chép một đoạn
    arr3.copyWithin(1, 2); // [1,3,4,4]

    // fill(value, start, end): thay thế phần tử
    arr3.fill(0, 1, 3); // [1,0,0,4]

    // with(index, value): tạo mảng mới với phần tử thay đổi (ES2023)
    let newArr = arr3.with(2, 99); // arr3 không đổi, newArr = [1,0,99,4]


    // ==========================
    // 7. Thông tin / Iterator
    // ==========================

    let arr4 = ["x", "y"];

    // length: độ dài
    arr4.length; // 2

    // keys(): iterator của index
    for (let k of arr4.keys()) console.log("key:", k); // 0,1

    // values(): iterator của giá trị
    for (let v of arr4.values()) console.log("value:", v); // x,y

    // entries(): iterator [index, value]
    for (let [i, v] of arr4.entries()) console.log("entry:", i, v);


    // ==========================
    // 8. Tạo mảng mới
    // ==========================

    // Array.from: từ iterable
    Array.from("abc"); // ["a","b","c"]

    // Array.of: từ danh sách phần tử
    Array.of(1, 2, 3); // [1,2,3]

    // Spread: copy mảng
    let arr5 = [1, 2];
    let arrCopy = [...arr5]; // [1,2]


    // ==========================
    // 9. Chuyển đổi
    // ==========================

    let arr6 = [10, 20, 30];

    // toString: mảng thành chuỗi
    arr6.toString(); // "10,20,30"

    // toLocaleString: giống nhưng có format địa phương
    arr6.toLocaleString(); // "10,20,30"

    // at(index): lấy phần tử theo index (âm = từ cuối)
    arr6.at(-1); // 30

    // toSpliced: trả về mảng mới sau khi splice (ES2023)
    let arr7 = [1,2,3,4];
    let sp = arr7.toSpliced(1,2,99); // [1,99,4], arr7 vẫn [1,2,3,4]

</script>
</body>
</html>